<base href="/">
{% extends 'base.html' %}
{% set page_id='index' %}
        {% block custom_scripts %}
	    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.6.1/socket.io.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<style>
html {
  touch-action: manipulation;
}
</style>

		
        {% endblock %}
{% block page_body %}
<div class="container-fluid px-1 px-lg-5 py-1 py-lg-3">
		            <div class="row gx-2 gx-lg-5">
                        <div class="col-md-6 mb-1">
                            <div class="card h-100 shadow">


<div class="input-group card-header">
  <span class="input-group-text" id="basic-addon1" data-i18n="chtemp"></span>
<button id="curvecalc-btn" class="btn btn-outline-secondary focus-ring focus-ring-warning topbar-setpoint" data-i18n="[data-bs-title]recalctooltip" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title=""><span id="hcurve">N.A°C</span><span id="button-spinner" class="spinner-border spinner-border-sm d-none" role="status"></span>
</button>
<select class="form-select form-select-sm w-sm-auto w-auto" id="powerheat">
  <option value="" selected disabled hidden>Status</option>
  <option value="pch" data-i18n="heating">Heating</option>
  <option value="pcool" data-i18n="cooling">Cooling</option>
  <option value="off" data-i18n="off">OFF</option>
</select>
         <span class="input-group-text topbar-statusbox" id="ch-addon-status" style="width:42px!important;min-width:42px!important;max-width:42px!important;flex:0 0 42px!important;padding:0!important;display:inline-flex!important;justify-content:center;align-items:center;box-sizing:border-box;">
  <i class="bi bi-power" id="firestatus" data-i18n="[data-bs-title]firestatus" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title=""></i></span>
</div>
                                <div class="card-body position-relative">
    <div id="heat-loading-overlay" class="position-absolute top-0 start-0 w-100 h-100 bg-body bg-opacity-75 d-flex align-items-center justify-content-center d-none">
        <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Loading...</span>
        </div>
    </div>
					<div class="row mb-2 align-items-center">
						<div class="col">
							<p class="card-text mb-0" data-i18n="actintemp"></p></div>
						<div class="col-auto">
							<span id="intemp">N.A</span> <span id="intemp_unit">&deg;C</span>
						</div>
					</div>
					<div class="row mb-2 align-items-center">
						<div class="col">
							<p class="card-text mb-0" id="settemp-label-inside" data-i18n="setintemp">Set indoor temperature:</p>
							<p class="card-text mb-0 d-none" id="settemp-label-ch" data-i18n="setchtemp">CH set temperature:</p>
						</div>
						<div class="col-auto">
							<span id="setpoint">N.A</span> &deg;C
						</div>
					</div>
					<div class="row mb-2 align-items-center" id="inside-humidity-row">
						<div class="col">
							<p class="card-text mb-0" data-i18n="insidehumidity">Inside humidity :</p>
						</div>
						<div class="col-auto">
							<span id="humid_ch">N.A</span> %
						</div>
					</div>
					<div class="row mb-2 align-items-center">
						<div class="col">
							<p class="card-text mb-0" data-i18n="actouttemp"></p>
						</div>
						<div class="col col-auto">
							<span id="outtemp">N.A</span> &deg;C{% if outsidetemp == 'openmeteo' %} <a href="https://open-meteo.com/">Weather data by Open-Meteo.com</a>{% endif %}
						</div>
					</div>
					
                                </div>
				<div class="card-footer">
					<!--<a class="btn btn-primary btn-lm float-sm-start" id="heat" onclick="tempchange('heat', '0')" href="#!">{{ _('Zmień zadaną wewnątrz') }}</a>-->
<div class="input-group">
	  <button class="btn btn-outline-secondary" style="width: 20% !important" type="button" id="water-decrement-button"> - </button>
  <input type="text" inputmode="decimal" class="form-control" placeholder=""  value="22" aria-label="" aria-describedby="button-addon1" disabled style="text-align: center" id="intempval">
    <button class="btn btn-outline-secondary" style="height: 20% !important; width: 20% !important" type="button" id="water-increment-button"> + </button>

</div>
<!--<a class="float-sm-end" id="pch" onclick="statechange('pch','on')" href="#"><i id="heatpower" class="iconpower"></i></a>-->
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 mb-1">
                            <div class="card h-100 shadow {% if dhwuse != '1' %}opacity-50 pe-none dhw-disabled{% endif %}" id="dhw-card">
					    <div class="input-group card-header">
					    	    <span class="input-group-text" id="basic-addon1" data-i18n="dhwsettemp"></span>
  <!-- CWU value box styled to match CO (#curvecalc-btn) -->
  <button id="dhwset-btn" type="button" class="btn btn-outline-secondary focus-ring focus-ring-warning topbar-setpoint topbar-setpoint--readonly" aria-disabled="true">
    <span id="dhwsetpoint">N.A°C</span>
  </button>
<select class="form-select form-select-sm w-sm-auto w-auto" id="powerdhw" onchange="statechange('pdhw', this.value)" {% if dhwuse != '1' %}disabled{% endif %}>
  <option value="" selected disabled hidden>...</option>
  <option value="on" data-i18n="on">ON</option>
  <option value="off" data-i18n="off">OFF</option>
</select>
         <span class="input-group-text topbar-statusbox" id="dhw-addon-status" style="width:42px!important;min-width:42px!important;max-width:42px!important;flex:0 0 42px!important;padding:0!important;display:inline-flex!important;justify-content:center;align-items:center;box-sizing:border-box;">
  <i class="bi bi-power" id="dhwstatus" data-i18n="[data-bs-title]firestatus" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title=""></i>

	 </span>
</div>

                                    <!--<div class="card-header d-flex flex-column flex-sm-row justify-content-between align-items-center">
					<h3 class="card-title text-nowrap mb-2 mb-sm-0">

                                           <i class="icondhw"></i>&nbsp{{ _('Zadana CWU: ') }}<span id="dhwsetpoint">N.A.</span>&deg;C</h3>

<select class="form-select form-select-sm w-sm-auto w-auto ms-4">
	<option value="0">OFF</option>
  <option value="1">ON</option>
</select>
				    </div>-->
                                <div class="card-body position-relative">
					    <div id="pdhw-loading-overlay" class="position-absolute top-0 start-0 w-100 h-100 bg-body bg-opacity-75 d-flex align-items-center justify-content-center d-none">
        <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Loading...</span>
        </div>
    </div>

				<div class="row mb-3">
					<div class="col">
						<p class="card-text" data-i18n="actdhwtemp"></p>
					</div>
					<div class="col-auto">
						<span id="ttemp">N.A</span> &deg;C
					</div>
				</div>
                                </div>
				<div class="card-footer">
<div class="input-group">
  <button class="btn btn-outline-secondary" style="width: 20% !important" type="button" id="dhw-decrement-button" {% if dhwuse != '1' %}disabled{% endif %}> - </button>
  {% if dhwuse != '1' %}
  <input type="text" class="form-control" placeholder="" value="N.A" aria-label="" aria-describedby="" disabled style="text-align: center" id="dhwtempval">
{% else %}
  <input type="text" class="form-control" placeholder=""  value="0" aria-label="" aria-describedby="" disabled style="text-align: center" id="dhwtempval">
{% endif %}
    <button class="btn btn-outline-secondary" style="height: 20% !important; width: 20% !important" type="button" id="dhw-increment-button" {% if dhwuse != '1' %}disabled{% endif %}> + </button>

</div>


					<!--<a class="btn btn-primary btn-lm float-sm-start" id="dhw" onclick="tempchange('dhw', '1')" href="#!">{{ _('Zmień zadaną CWU') }}</a>
					<a class="float-sm-end" id="pdhw" onclick="statechange('pdhw','on')" href="#"><i id="dhwpower" class="iconpower"></i></a>-->
                                </div>
                            </div>
                        </div>
                  <!--      <div class="col-md-4 mb-1">
                            <div class="card h-100">
                                <div class="card-body">
					<h3 class="card-title"><i class="iconcool"></i>&nbsp{{ _('Chłodzenie') }}</h3>
					<p class="card-text">{{ _('Wilgotność wewnątrz: ') }}<span id="humid">N.A.</span> %</p>

                                </div>
				<div class="card-footer"><a class="btn btn-primary btn-lm float-sm-start" id="cool" onclick="tempchange('cool')" href="#!">{{ _('Zmień temp. chłodzenia') }}</a>
                                    <a class="float-sm-end" id="pcool" onclick="statechange('pcool','on')" href="#"><i id="coolpower" class="iconpower"></i></a>
                                </div>
			    </div>
		  </div>-->
                    </div>
                </div>
                <div class="container-fluid px-1 px-lg-5 py-1 py-lg-3">
                    <div class="row gx-2 gx-lg-5">
                        <div class="col-md-4 mb-1">
                            <div class="card h-100 shadow">
                                <div class="card-body">
					<div class="row align-items-center mb-3">
    <div class="col">
        <p class="card-text mb-0" data-i18n="dash.twitwo"></p>
    </div>
    <div class="col-auto text-end" style="min-width:110px;">
        <span id="twi">N.A</span> / <span id="two">N.A</span> &deg;C
    </div>
</div>
					<div class="row mb-3">
                                                <div class="col">
							<p class="card-text" data-i18n="dash.pump"></p>
						</div>
                                                <div class="col-auto">
							<span id="pump">N.A</span>
						</div>
					</div>
					<div class="row mb-3">
                                                <div class="col">
							<p class="card-text" data-i18n="dash.threeway"></p>
						</div>
                                                <div class="col-auto">
							<span id="threeway" class="threeway-indicator">N.A</span>
						</div>
                                        </div>
					<div class="row">
                                                <div class="col">
							<p class="card-text" data-i18n="dash.freq"></p>
						</div>
                                                <div class="col-auto">
							<span id="fact">N.A</span> Hz
						</div>
                                        </div>
			    </div>
			<div class="card-footer status-strip">
				<div class="status-item status-item--left">
					<span id="antifreeze" class="antifreeze-indicator" data-i18n="antifreeze">Antifreeze</span>
				</div>
				<div class="status-item status-item--center">
					<span id="defrost" class="defrost-indicator" data-i18n="defrost">Defrost</span>
				</div>
				<div class="status-item status-item--right">
					<span id="heater" class="heater-indicator" data-i18n="dash.heater">Heater</span>
				</div>
			</div>
                        </div>
		</div>
						<div class="col-md-4 mb-1">
                            <div class="card h-100 shadow">
                                <div class="card-body">
                                    <div class="row mb-2 align-items-center py-1">
                                        <div class="col">
                                            <h6 class="card-title mb-0" data-i18n="freqlimit">Frequency limit:</h6>
                                        </div>
                                        <div class="col-auto text-end text-end" style="min-width: 110px;">
                                            <div class="d-flex align-items-center justify-content-end">
                                                <span id="flimit">N.A</span>
                                                <div class="custom-control custom-switch mt-1">
						<form method="POST">
                                                    <select class="form-select" aria-label="flimitchange" id="flimitchange" style="display: none;" name="flimitchange" onchange="flrchange($('#flimitchange').val())">
                                                        <option data-i18n="flimitchangeon" value="1">ON</option>
                                                        <option data-i18n="flimitchangeoff" value="0">OFF</option>
                                                    </select>
                                                    <span class="custom-control-label"></span>
                                                </form>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
				                                        <div id="flimitauto" style="display: none;">
										<div class="row mb-3" id="flimittemp-row">
											<div class="col">
												<p class="card-text" data-i18n="flimitton">{{ _('Temperatura załączania: ') }}&gt;</p>
											</div>
											<div class="col-auto">
												<span id="ltemp">N.A</span>°C
											</div>
										</div>
										<div class="row align-items-center g-2">
    <div class="col">
        <p class="card-text mb-0" data-i18n="flimitrelstat">{{ _('Status przekaźnika (CN23): ') }}</p>
    </div>
    <div class="col-auto text-end" style="min-width: 110px;">
        <span id="flrelay">N.A</span>
    </div>
</div>
									</div>
                                </div>
                                <div class="card-footer">
					<a class="btn btn-outline-secondary btn-lm float-sm-start" href="/settings#settings-hcurve" data-i18n="settings">Ustawienia</a>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 mb-1" id="presetdiv">
                            <div class="card h-100 shadow">
                                <div class="card-body">
                                    <div class="row mb-2 align-items-center py-1">
                                        <div class="col">
                                            <h6 class="card-title mb-0"><span id="preset-title" data-i18n="ind.modech">{{ _('Wybór trybu') }}</span>:</h6>
                                        </div>
                                        <div class="col-auto">
                                            <div class="custom-control custom-switch">
                                                <form method="POST">
                                                    <select class="form-select" aria-label="presetchange" id="presetchange" style="display: none;" name="presetchange" onchange="modechange($('#presetchange').val())">
                                                        <option value="quiet">Quiet</option>
                                                        <option value="eco">Eco</option>
                                                        <option value="turbo">Turbo</option>
                                                    </select>
                                                    <span class="custom-control-label"></span>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
				    <div id="presetauto" style="display: none;">
                                    <div class="row"><div class="col"><p class="card-text" id="quiet">Quiet </p></div><div class="col">&gt;</div>
					    <div class="col"><span id="presetquiet">{{ presetquiet }}</span> °C
</div></div>
                                    <div class="row"><div class="col"><p class="card-text" id="eco">Eco </p></div></div>
				    <div class="row"><div class="col"><p class="card-text" id="turbo">Turbo </p></div><div class="col">&lt;</div><div class="col"><span id="presetturbo">{{ presetturbo }}</span> °C
					    </div>
</div></div>
                                </div>
                                <div class="card-footer">
					<a class="btn btn-outline-secondary btn-lm float-sm-start"  href="/settings#settings-hcurve" data-i18n="settings">Ustawienia</a>

                                </div>
                            </div>
                        </div>
        <div class="col-md-4 mb-1" id="antionoffdiv" style="display: none">
            <div class="card h-100 shadow">
                <div class="card-body">
                   <h6 class="card-title d-flex align-items-center justify-content-between">
					<span id="aood-title" data-i18n="ind.aood">{{ _('Tryb Anty ON-OFF "Delta"') }}</span>
					<span class="d-flex align-items-center gap-2">
						<span id="aood-delta-wrap" style="display: none;">Δt = <b id="delta">N.A.</b> °C</span>
						<span id="aood-zone-wrap" class="d-none">
							<span id="aood-zone-icon" class="zone-indicator"><i id="aood-zone-bi" class="bi"></i></span>
						</span>
					</span>
					</h6>

                    <div class="row align-items-center">
                        <div class="col"><p class="card-text mode-label" data-i18n="deltafreqlimit" id="flimiton-label">Ograniczenie częstot.</p></div>
                        <div class="col-auto text-center aood-hide-in-zone">&lt;</div>
                        <div class="col-auto text-center aood-hide-in-zone"><span id="deltatempflimit"></span>  °C</div>
                    </div>

                    <div class="row align-items-center">
                        <div class="col"><p class="card-text mode-label" id="quiet-label">Quiet</p></div>
                        <div class="col-auto text-center aood-hide-in-zone">&lt;</div>
                        <div class="col-auto text-center aood-hide-in-zone"><span id="deltatempquiet"></span>  °C</div>
                    </div>

                    <div class="row align-items-center">
                        <div class="col"><p class="card-text mode-label" id="eco-label">Eco</p></div>
                    </div>

                    <div class="row align-items-center">
                        <div class="col"><p class="card-text mode-label" id="turbo-label">Turbo</p></div>
                        <div class="col-auto text-center aood-hide-in-zone">&gt;</div>
                        <div class="col-auto text-center aood-hide-in-zone"><span id="deltatempturbo"></span>  °C</div>
                    </div>

                    <div class="row mt-2 align-items-center aood-hide-in-zone" id="aood-delta-time-row">
                        <div class="col"><p class="card-text" data-i18n="set.aoodt">{{ _('Czas przeliczania delty:') }}</p></div>
                        <div class="col-auto text-center"><span id="antionoffdeltatime"></span> '</div>
                    </div>

                </div>
                <div class="card-footer">
                    <a class="btn btn-outline-secondary btn-lm float-sm-start" href="/settings" data-i18n="settings">Ustawienia</a>
                </div>
            </div>
        </div>
</div>
</div>
        <script src="{{ url_for('static', filename='longtouch.js') }}"></script>
	<!--        <script src="{{ url_for('static', filename='custom.js') }}"></script>-->
		
        <script src="{{ url_for('static', filename='socket.js') }}"></script>



{% endblock %}
